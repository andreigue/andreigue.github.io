<!-- ClustrMaps Visitor Map -->
<div class="clustrmaps-section" style="margin-top: 2rem; padding: 2rem 0; background: #f8f9fa; border-top: 1px solid #e9ecef;">
  <div class="wrapper">
    <header class="page__header">
      <h1 class="page__title" style="text-align: center; margin-bottom: 1rem;">Visitor Map</h1>
      <p style="text-align: center; color: #666; margin-bottom: 2rem;">
        See where visitors to this site are located around the world
      </p>
    </header>
    
    <!-- Embedded Visitor Map -->
    <div style="text-align: center;">
      <!-- ClustrMaps Embedded Widget -->
      <div style="background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 8px; padding: 1rem; max-width: 800px; margin: 0 auto;">
        <script type="text/javascript" id="clustrmaps" src="https://clustrmaps.com/map_v2.js?d=RvkwUaNgpYVyZhZQW9c5uLsuNfSiQBEPl8k8qjtAkFI&cl=ffffff&w=a"></script>
        
        <!-- Fallback if script doesn't load -->
        <noscript>
          <div style="background: #e9ecef; padding: 2rem; border-radius: 8px; margin: 1rem 0;">
            <div style="font-size: 3rem; margin-bottom: 1rem;">üåç</div>
            <h3 style="margin: 0 0 1rem 0; color: #495057;">Visitor Map</h3>
            <p style="margin: 0; color: #6c757d;">JavaScript is required to display the visitor map</p>
            <p style="margin: 0.5rem 0 0 0; font-size: 0.9em; color: #adb5bd;">
              <a href="https://clustrmaps.com/map/andreigue.github.io" target="_blank" style="color: #007bff; text-decoration: underline;">
                Click here to view visitor map on ClustrMaps
              </a>
            </p>
          </div>
        </noscript>
      </div>
    </div>
    
    <!-- Debug and Fallback -->
    <div id="clustrmaps-debug" style="display: none; text-align: center; padding: 2rem; background: #f0f0f0; border-radius: 8px; margin: 1rem 0;">
      <p><strong>ClustrMaps Status</strong></p>
      <p id="debug-info">Loading...</p>
      <p><small>If you see this message, ClustrMaps may not be loading properly.</small></p>
    </div>
    
    <script>
      // Debug ClustrMaps embedded widget loading
      setTimeout(function() {
        var debugDiv = document.getElementById('clustrmaps-debug');
        var debugInfo = document.getElementById('debug-info');
        
        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
          debugInfo.innerHTML = 'Local development - ClustrMaps embedded widget will work on live site';
          debugDiv.style.display = 'block';
        } else {
          // Check if ClustrMaps widget loaded (look for iframe or map elements)
          var clustrmapsIframe = document.querySelector('iframe[src*="clustrmaps"]');
          var clustrmapsWidget = document.querySelector('[id*="clustrmaps"] iframe, [id*="clustrmaps"] img');
          
          if (clustrmapsIframe || clustrmapsWidget) {
            debugInfo.innerHTML = 'ClustrMaps embedded widget loaded successfully!';
            debugDiv.style.display = 'none'; // Hide if working
          } else {
            debugInfo.innerHTML = 'ClustrMaps widget not loading - may need time or visitor data';
            debugDiv.style.display = 'block';
          }
        }
      }, 5000);
      
      // Additional check after more time
      setTimeout(function() {
        var debugDiv = document.getElementById('clustrmaps-debug');
        var debugInfo = document.getElementById('debug-info');
        
        if (window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') {
          var clustrmapsWidget = document.querySelector('[id*="clustrmaps"] iframe, [id*="clustrmaps"] img');
          if (!clustrmapsWidget && debugDiv.style.display !== 'none') {
            debugInfo.innerHTML = 'ClustrMaps may need visitor data to display - try refreshing after some visitors';
          }
        }
      }, 10000);
    </script>
    
    <div style="text-align: center; margin-top: 1rem; color: #888; font-size: 0.9em;">
      <p><i class="fas fa-info-circle"></i> Visitor locations are tracked automatically and updated in real-time</p>
    </div>
  </div>
</div>
